{% extends "base.html" %}

{% block title %}Ajouter une opération{% endblock %}

{% block content %}
<h1>Ajouter une opération</h1>

<!-- Messages flash -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-container" style="margin-bottom: 15px;">
      {% for category, message in messages %}
        <div class="flash-message flash-{{ category }}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<form method="post" class="form-default">

  <!-- Date de l'opération -->
  <div class="form-group">
    <label for="date" class="label-default">
      Date de l'opération <span class="text-danger">*</span>
    </label>
    <input type="date" id="date" name="date" required
           value="{{ request.form.get('date', '') }}" class="input-default">
    <small class="form-text">Sélectionnez la date de l'opération</small>
  </div>

  <!-- Nom -->
  <div class="form-group">
    <label for="nom" class="label-default">
      Nom <span class="text-danger">*</span>
    </label>
    <input type="text" id="nom" name="nom" required placeholder="Ex : Achat matériel"
           value="{{ request.form.get('nom', '') }}" class="input-default">
    <small class="form-text">Description courte de l'opération</small>
  </div>

  <!-- Type d'opération -->
  <div class="form-group">
    <label for="type" class="label-default">
      Type d'opération <span class="text-danger">*</span>
    </label>
    <select id="type" name="type" required class="input-default">
      <option value="" disabled {% if not request.form.get('type') %}selected{% endif %}>--Choisissez--</option>
      <option value="Entrée" {% if request.form.get('type') == 'Entrée' %}selected{% endif %}>Entrée</option>
      <option value="Sortie" {% if request.form.get('type') == 'Sortie' %}selected{% endif %}>Sortie</option>
    </select>
    <small class="form-text">Type d'opération financière</small>
  </div>

  <!-- Montant -->
  <div class="form-group">
    <label for="montant" class="label-default">
      Montant (USD) <span class="text-danger">*</span>
    </label>
    <input type="number" step="0.01" id="montant" name="montant" required placeholder="Ex : 100.00"
           value="{{ request.form.get('montant', '') }}" class="input-default">
    <small class="form-text">Saisissez le montant correspondant</small>
  </div>

  <!-- Description -->
  <div class="form-group">
    <label for="description" class="label-default">Description</label>
    <input type="text" id="description" name="description" placeholder="Optionnel"
           value="{{ request.form.get('description', '') }}" class="input-default">
    <small class="form-text">Information complémentaire (facultative)</small>
  </div>

  <!-- Actions -->
  <div class="form-actions">
    <a href="{{ url_for('main.index') }}" class="btn-link">Annuler</a>
    <button type="submit" class="btn-success">Enregistrer</button>
  </div>

  <div class="form-note">
    <span class="text-danger">*</span> Champs obligatoires
  </div>

</form>
{% endblock %}
