{% extends "base.html" %}

{% block title %}Ajouter paiement pour {{ etudiant }}{% endblock %}

{% block content %}
<h2>üí∞ Ajouter un paiement pour {{ etudiant }}</h2>

{# Messages flash #}
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-container" style="margin-bottom: 15px;">
      {% for category, message in messages %}
        <div class="flash-message
            {% if category == 'success' %}flash-success{% endif %}
            {% if category == 'error' %}flash-error{% endif %}
            {% if category == 'warning' %}flash-warning{% endif %}
            {% if category == 'info' %}flash-info{% endif %}">
          {{ message }}
          <button class="flash-close-btn" onclick="this.parentElement.style.display='none';">√ó</button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<form method="post" class="form-default">

  <!-- Cat√©gorie -->
  <label for="categorie" class="label-default">Cat√©gorie de paiement <span class="text-danger">*</span></label>
  <select name="categorie" id="categorie" required class="input-default">
    <option value="" disabled {% if not request.form.get('categorie') %}selected{% endif %}>-- Choisissez une cat√©gorie --</option>
    {% for cat in categories %}
      <option value="{{ cat }}" {% if cat == request.form.get('categorie') %}selected{% endif %}>{{ cat }}</option>
    {% endfor %}
  </select>
  <small class="text-muted">S√©lectionnez la cat√©gorie appropri√©e.</small>

  <!-- Montant -->
  <label for="montant" class="label-default">Montant (USD) <span class="text-danger">*</span></label>
  <input type="number" step="0.01" min="0.01" name="montant" id="montant"
         value="{{ request.form.get('montant', '') }}" required class="input-default">
  <small class="text-muted">Entrez le montant pay√© en dollars am√©ricains.</small>

  <!-- Date paiement -->
  <label for="date_paiement" class="label-default">Date de paiement <span class="text-danger">*</span></label>
  <input type="date" name="date_paiement" id="date_paiement"
         value="{{ request.form.get('date_paiement', '') }}" required class="input-default">
  <small class="text-muted">Date √† laquelle le paiement a √©t√© effectu√©.</small>

  <!-- Actions -->
  <div class="form-actions" style="margin-top: 15px;">
    <a href="{{ url_for('classes.detail_classe', nom_classe=nom_classe) }}" class="btn-link">Annuler</a>
    <button type="submit" class="btn-success">Enregistrer</button>
  </div>

  <div class="form-note">
    <span class="text-danger">*</span> Champs obligatoires
  </div>

</form>
{% endblock %}
