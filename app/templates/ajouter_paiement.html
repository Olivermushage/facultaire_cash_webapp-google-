{% extends "base.html" %}

{% block title %}Ajouter paiement pour {{ etudiant }}{% endblock %}

{% block content %}
<h1>Ajouter un paiement pour {{ etudiant }}</h1>

<!-- Messages flash -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-container" style="margin-bottom: 15px;">
      {% for category, message in messages %}
        <div class="flash-message flash-{{ category }}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<form method="post" class="form-default">

  <!-- Catégorie -->
  <div class="form-group">
    <label for="categorie" class="label-default">
      Catégorie de paiement <span class="text-danger">*</span>
    </label>
    <select name="categorie" id="categorie" required aria-required="true" class="input-default">
      <option value="" disabled {% if not request.form.get('categorie') %}selected{% endif %}>-- Choisissez une catégorie --</option>
      {% for cat in categories %}
        <option value="{{ cat }}" {% if cat == request.form.get('categorie') %}selected{% endif %}>{{ cat }}</option>
      {% endfor %}
    </select>
    <small class="form-text">Sélectionnez la catégorie appropriée.</small>
  </div>

  <!-- Montant -->
  <div class="form-group">
    <label for="montant" class="label-default">
      Montant (USD) <span class="text-danger">*</span>
    </label>
    <input type="number" step="0.01" min="0.01" name="montant" id="montant" required
           value="{{ request.form.get('montant', '') }}" class="input-default">
    <small class="form-text">Entrez le montant payé en dollars américains.</small>
  </div>

  <!-- Date paiement -->
  <div class="form-group">
    <label for="date_paiement" class="label-default">
      Date de paiement <span class="text-danger">*</span>
    </label>
    <input type="date" name="date_paiement" id="date_paiement" required
           value="{{ request.form.get('date_paiement', '') }}" class="input-default">
    <small class="form-text">Date à laquelle le paiement a été effectué.</small>
  </div>

  <!-- Actions -->
  <div class="form-actions">
    <a href="{{ url_for('classes.detail_classe', nom_classe=nom_classe) }}" class="btn-link">Annuler</a>
    <button type="submit" class="btn-success">Enregistrer</button>
  </div>

  <div class="form-note">
    <span class="text-danger">*</span> Champs obligatoires
  </div>

</form>
{% endblock %}
